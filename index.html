<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="icon" type="image/ico" href="favicon.ico">
    <link rel="stylesheet" href="css/styles.css">
    <title>Times Tables</title>
    <!-- <style>h1, .textlarge, #answer {font-size:9px;}</style>  -->
    <script src="js/Question.js"></script>
    <script src="js/Timestable.js"></script>
    <script src="js/Config.js"></script>
    <script src="js/View.js"></script>
    <script src="js/Ctrl.js"></script>

    <script>
        var base=0, ctrl, view, result={};

        document.addEventListener('DOMContentLoaded', function(){
            view=new View();
            ctrl=new Ctrl(view);

            addEventListener('seven.answered', ctrl.answered);
            addEventListener('seven.resetbase', ctrl.resetBase);
            document.getElementById('btnReload').addEventListener('click', ctrl.reload);

            view.updateConfigs();
            ctrl.showSetup();
        });
    </script>
</head>
<body>

    <header role="banner">

        <h1><abbr title="Times Tester">Times Tester</abbr></h1>
    </header>

    <div id="content" class="wrap">
        <div id="setup" class="hide">
            <h1>Config</h1>
            <div>
                <h3>Available Configs</h3>
                <p>
                    <a href="#" onclick=ctrl.setConfig(Config.prototype.load('{"base":1,"order":"forward","numberOfQuestions":13,"name":"default"}'))>Default</a>
                </p>

                <p id="availconfig">
                </p>

            </div>
            <div>
                <h3>Create a Config</h3>
                <fieldset>
                    <label for="base">Multiplication base</label>
                    <select id="base"><option value="">- Choose a base -</option></select>
                </fieldset>
                <fieldset>
                    <label for="cfgOrder">Order</label>
                    <input type="radio" name="cfgOrder" value="forward" checked="true">Forward</input>
                    <input type="radio" name="cfgOrder" value="backward">Backward</input>
                    <input type="radio" name="cfgOrder" value="random">Random</input>
                </fieldset>
                <fieldset>
                    <label for="cfgNumQuestions">Number of Questions</label>
                    <input id="cfgNumQuestions" value="13">
                </fieldset>
                <fieldset>
                    <label for="cfgName">Save config as</label>
                    <input id="cfgName">
                </fieldset>
                <button onclick="ctrl.setConfig();">Start</button>
            </div>
        </div>

        <div id="form">
        	<table border="0" xcellpadding="0" xcellspacing="0">
        		<tr>
        			<td colspan="3" class="progress">
						<span id="progress"></span>
        			</td>
        		</tr>
        		<tr>
        			<td>&nbsp;</td>
        			<td class="alignright textlarge">
                		<span id="op1" style="margin-left: 15px;">0</span>
        			</td>
        			<td>&nbsp;</td>
        		</tr>
        		<tr>
        			<td class="textlarge">x</td>
        			<td class="alignright textlarge"><span id="op2">0</span></td>
        			<td>&nbsp;</td>
        		</tr>
        		<tr><td colspan="3">
            		<hr>
        		</td></tr>
        		<tr>
        			<td>&nbsp;</td>
        			<td><input type="number" id="answer"></td>
        			<td>
					    
					    <button id="btnNext">Go!</button>
					</td>
				</tr>
				<tr><td colspan="3" align="center">
					<span id="feedback"></span>
				</td></tr>
			</table>
        </div>

        <div id="result" class="hide">
            <h1>Result</h1>
            <button id="btnReload">Restart</button>
        </div>
    </div>
    
    <footer role="contentinfo">
    	<hr>
        <nav role="navigation">
        	<a href="#" onclick="javascript:window.location.reload();">Restart</a> | <a href="#" onclick="javascript:ctrl.showSetup();">Setup</a>
        	<br><br>
			<small style="text-align:right">2014 Russell Hampton</small>
        </nav>
    </footer>
</body>
</html>